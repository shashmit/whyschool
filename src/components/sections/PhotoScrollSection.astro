---
// Photo Scroll Section Component
---

<section id="photoScrollSegment" class="bg-white py-8 md:py-12">
  <div class="max-w-8xl ">
    <div class="text-center mb-6">
      <div class="inline-flex items-center px-5 py-2 bg-indigo-300 text-gray-900 border-4 border-gray-900 rounded-full text-base font-black transform rotate-1 shadow-[4px_4px_0px_rgba(0,0,0,1)]">
        ðŸ“· Team Gallery
      </div>
      <h3 class="text-3xl sm:text-4xl font-black text-gray-900 mt-4">Meet Our Team</h3>

    </div>

    <!-- Horizontal scroll container -->
    <div id="photoScrollContainer" class="overflow-x-auto overflow-y-hidden scrollbar-hide w-full h-[340px] sm:h-[388px] md:h-[440px] mx-4 md:mx-2">
      <div class="flex items-center gap-6 snap-x snap-mandatory ">
        <!-- Image Card 1 -->
         <div class="snap-center flex-none w-[360px] ">
          <div class="relative rounded-3xl overflow-hidden bg-white border-4 border-gray-900 shadow-[8px_8px_0px_rgba(0,0,0,1)] transform hover:rotate-1 transition-all duration-300">
            <img src="https://pasjrtnci5ayebee.public.blob.vercel-storage.com/images/people/founder.jpeg" alt="Whyschool community sharing ideas" class="w-[420px] h-[320px] sm:h-[380px] md:h-[420px] object-cover" />
            <!-- Always-visible overlay info -->
            <div class="absolute bottom-3 left-3 sm:bottom-4 sm:left-4 z-10 pointer-events-none">
              <div class="px-3 py-2 bg-indigo-300 text-gray-900 border-4 border-gray-900 rounded-xl text-[10px] sm:text-xs md:text-sm font-black leading-tight shadow-[4px_4px_0px_rgba(0,0,0,1)]">
                <div>Ritik Prajjwal Sahu</div>
                <div>Founder</div>
                <div>NIT Rourkela</div>
              </div>
            </div>
          </div>
        </div>
        <!-- Image Card 2 -->
        <div class="snap-center flex-none w-[360px]">
          <div class="relative rounded-3xl overflow-hidden bg-white border-4 border-gray-900 shadow-[8px_8px_0px_rgba(0,0,0,1)] transform hover:-rotate-1 transition-all duration-300">
            <img src="https://pasjrtnci5ayebee.public.blob.vercel-storage.com/images/people/co-founder" alt="Whyschool activity, students collaborating" class="w-[420px] h-[320px] md:h-[420px] object-fill" />
            <!-- Always-visible overlay info -->
            <div class="absolute bottom-3 left-3 sm:bottom-4 sm:left-4 z-10 pointer-events-none">
              <div class="px-3 py-2 bg-indigo-300 text-gray-900 border-4 border-gray-900 rounded-xl text-[10px] sm:text-xs md:text-sm font-black leading-tight shadow-[4px_4px_0px_rgba(0,0,0,1)]">
                <div>Shashmit</div>
                <div>The Tech Guy</div>
              </div>
            </div>
          </div>
        </div>

       

        <!-- Image Card 3 -->
        <div class="snap-center flex-none w-[360px]">
          <div class="relative rounded-3xl overflow-hidden bg-white border-4 border-gray-900 shadow-[8px_8px_0px_rgba(0,0,0,1)] transform hover:rotate-1 transition-all duration-300">
            <img src="https://pasjrtnci5ayebee.public.blob.vercel-storage.com/images/people/anwesha" alt="Whyschool community sharing ideas" class="w-[420px] h-[320px] sm:h-[380px] md:h-[420px] object-cover" />
            <!-- Always-visible overlay info -->
            <div class="absolute bottom-3 left-3 sm:bottom-4 sm:left-4 z-10 pointer-events-none">
              <div class="px-3 py-2 bg-indigo-300 text-gray-900 border-4 border-gray-900 rounded-xl text-[10px] sm:text-xs md:text-sm font-black leading-tight shadow-[4px_4px_0px_rgba(0,0,0,1)]">
                <div>Anwesha Swain </div>
                <div>Lady Sri Ram </div>
                <div>BlackRock</div>
              </div>
            </div>
          </div>
        </div>
      <!-- Image Card 4 -->
          <div class="snap-center flex-none w-[360px]">
          <div class="relative rounded-3xl overflow-hidden bg-white border-4 border-gray-900 shadow-[8px_8px_0px_rgba(0,0,0,1)] transform hover:rotate-1 transition-all duration-300">
            <img src="https://pasjrtnci5ayebee.public.blob.vercel-storage.com/images/people/WhatsApp%20Image%202025-11-05%20at%2000.27.09.jpeg" alt="Whyschool community sharing ideas" class="w-[420px] h-[320px] sm:h-[380px] md:h-[420px] object-cover" />
            <!-- Always-visible overlay info -->
            <div class="absolute bottom-3 left-3 sm:bottom-4 sm:left-4 z-10 pointer-events-none">
              <div class="px-3 py-2 bg-indigo-300 text-gray-900 border-4 border-gray-900 rounded-xl text-[10px] sm:text-xs md:text-sm font-black leading-tight shadow-[4px_4px_0px_rgba(0,0,0,1)]">
                <div>Alankrita Yadav </div>
                <div>Lady Sri Ram </div>
                <div>INSEAD</div>
              </div>
            </div>
          </div>
          </div>
        <!-- Image Card 5 -->
        <div class="snap-center flex-none w-[360px]">
          <div class="relative rounded-3xl overflow-hidden bg-white border-4 border-gray-900 shadow-[8px_8px_0px_rgba(0,0,0,1)] transform hover:rotate-1 transition-all duration-300">
            <img src="https://pasjrtnci5ayebee.public.blob.vercel-storage.com/images/people/WhatsApp%20Image%202025-11-04%20at%2019.20.31.jpeg" alt="Whyschool community sharing ideas" class="w-[420px] h-[320px] sm:h-[380px] md:h-[420px] object-cover" />
            <!-- Always-visible overlay info -->
            <div class="absolute bottom-3 left-3 sm:bottom-4 sm:left-4 z-10 pointer-events-none">
              <div class="px-3 py-2 bg-indigo-300 text-gray-900 border-4 border-gray-900 rounded-xl text-[10px] sm:text-xs md:text-sm font-black leading-tight shadow-[4px_4px_0px_rgba(0,0,0,1)]">
                <div>Pritesh Raj</div>
                <div>DATA SCIENTISTS</div>
                <div>DRDO ISRO</div>
              </div>
            </div>
          </div>
        </div>
       
      </div>
    </div>
  </div>
</section>

<style>
  /* Hide horizontal scrollbar for a cleaner look */
  .scrollbar-hide {
    -ms-overflow-style: none; /* IE and Edge */
    scrollbar-width: none; /* Firefox */
  }
  .scrollbar-hide::-webkit-scrollbar {
    display: none; /* Chrome, Safari */
  }
  /* Lock scroll interactions to X-axis for the gallery */
  #photoScrollContainer {
    touch-action: pan-x;
    overscroll-behavior-y: contain;
  }
</style>

<script>
  (() => {
    const prefersReducedMotion = window.matchMedia && window.matchMedia('(prefers-reduced-motion: reduce)').matches;
    if (prefersReducedMotion) return;

    const container = document.getElementById('photoScrollContainer');
    if (!container) return;

    const track = container.querySelector('.flex');
    if (!track) return;

    let paused = false;
    let positions = [];
    let index = 0;
    const intervalMs = 3500;
    let timerId = null;

    let originalWidth = 0;
    let originalCards = [];
    let wrapping = false;

    const rebuildClones = () => {
      // Remove any existing clones
      Array.from(track.children).forEach((child) => {
        if (child.dataset && child.dataset.clone === 'true') child.remove();
      });

      // Capture original cards (non-clones)
      originalCards = Array.from(track.children);

      // Measure original width before cloning
      originalWidth = track.scrollWidth;

      // Append clones to enable seamless wrap
      originalCards.forEach((node) => {
        const clone = node.cloneNode(true);
        clone.dataset.clone = 'true';
        track.appendChild(clone);
      });

      // Recompute positions with clones present
      computePositions(true);

      // Normalize scrollLeft into the first sequence
      if (container.scrollLeft >= originalWidth) {
        container.scrollLeft -= originalWidth;
      }
    };

    const computePositions = (afterClone = false) => {
      const cards = Array.from(track.children);
      positions = cards.map((el) => el.offsetLeft);
      // Align index to closest current scroll position
      const current = container.scrollLeft;
      let closestIdx = 0;
      let minDiff = Infinity;
      for (let i = 0; i < positions.length; i++) {
        const diff = Math.abs(positions[i] - current);
        if (diff < minDiff) {
          minDiff = diff;
          closestIdx = i;
        }
      }
      index = closestIdx;

      // If called after cloning, ensure index maps to original range
      if (afterClone && positions[index] >= originalWidth) {
        // Bring into original sequence
        container.scrollLeft = positions[index] - originalWidth;
        index = Math.max(0, index - originalCards.length);
      }
    };

    const tick = () => {
      if (paused || positions.length === 0) return;
      index = (index + 1) % positions.length;
      const target = positions[index];
      container.scrollTo({ left: target, behavior: 'smooth' });

      // If target is in clone region, prepare a seamless wrap on scroll
      if (target >= originalWidth) {
        wrapping = true;
      }
    };

    const start = () => {
      stop();
      timerId = setInterval(tick, intervalMs);
    };

    const stop = () => {
      if (timerId) {
        clearInterval(timerId);
        timerId = null;
      }
    };

    // Seamless wrap when we cross into clones
    container.addEventListener('scroll', () => {
      if (!wrapping) return;
      if (container.scrollLeft >= originalWidth) {
        container.scrollLeft -= originalWidth;
        index = Math.max(0, index - originalCards.length);
        wrapping = false;
      }
    }, { passive: true });

    const pause = () => { paused = true; };
    const resume = () => { paused = false; };

    // Interaction handlers to pause/resume
    container.addEventListener('mouseenter', pause);
    container.addEventListener('mouseleave', resume);
    container.addEventListener('touchstart', pause, { passive: true });
    container.addEventListener('touchend', resume, { passive: true });
    container.addEventListener('wheel', pause, { passive: true });
    container.addEventListener('pointerdown', pause);
    container.addEventListener('focusin', pause);
    container.addEventListener('focusout', resume);
    document.addEventListener('visibilitychange', () => {
      paused = document.hidden;
    });

    // Keep positions up-to-date on resize/content changes (rebuild clones for accuracy)
    window.addEventListener('resize', () => {
      rebuildClones();
    });

    // Recompute after images load for accurate offsets and build clones
    const images = track.querySelectorAll('img');
    let pendingImages = images.length;
    const tryStart = () => {
      rebuildClones();
      start();
    };

    if (pendingImages === 0) {
      tryStart();
    } else {
      images.forEach((img) => {
        if (img.complete) {
          pendingImages -= 1;
        } else {
          img.addEventListener('load', () => {
            pendingImages -= 1;
            if (pendingImages === 0) tryStart();
          }, { once: true });
          img.addEventListener('error', () => {
            pendingImages -= 1;
            if (pendingImages === 0) tryStart();
          }, { once: true });
        }
      });
      // Fallback: start after a timeout even if images don't report
      setTimeout(() => {
        if (!timerId) tryStart();
      }, 1500);
    }
  })();
</script>
